<!DOCTYPE html>
<html lang="ru">
<head>
   <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N5KDBPR7CD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-N5KDBPR7CD');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –ò–ù–ù - Checko API</title>
    <style>
        :root {
            --color-primary: #208084;
            --color-primary-hover: #1a6670;
            --color-text: #133c3b;
            --color-bg: #fcfcf9;
            --color-surface: #ffffff;
            --color-border: #d4d4d0;
            --color-error: #c01531;
            --color-success: #208084;
            --color-warning: #ff9800;
            --radius-md: 8px;
            --space-16: 16px;
            --space-20: 20px;
        }

        * { box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: var(--space-20);
            background-color: var(--color-bg);
            color: var(--color-text);
        }

        .container { max-width: 1000px; margin: 0 auto; }

        h1 {
            font-size: 28px;
            margin: 0 0 var(--space-20) 0;
            text-align: center;
            color: var(--color-text);
        }

        .form-group { margin-bottom: var(--space-20); }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
            color: var(--color-text);
        }

        .input-wrapper { display: flex; gap: 8px; }

        input[type="text"] {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            font-size: 14px;
            color: var(--color-text);
            background-color: var(--color-surface);
            transition: border-color 200ms;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(32, 128, 132, 0.1);
        }

        button {
            padding: 10px 20px;
            background-color: var(--color-primary);
            color: #ffffff;
            border: none;
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 200ms;
            white-space: nowrap;
        }

        button:hover { background-color: var(--color-primary-hover); }
        button:active { opacity: 0.9; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }

        .tabs {
            display: flex;
            gap: 8px;
            margin: var(--space-20) 0;
            border-bottom: 2px solid var(--color-border);
        }

        .tab-button {
            padding: 8px 16px;
            background: none;
            border: none;
            color: var(--color-text);
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
            transition: all 200ms;
        }

        .tab-button.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .loading {
            text-align: center;
            padding: var(--space-20);
            color: var(--color-primary);
        }

        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(32, 128, 132, 0.2);
            border-top-color: var(--color-primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        .result-card {
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: var(--space-20);
            margin-top: var(--space-20);
        }

        .result-section { margin-bottom: var(--space-20); }
        .result-section:last-child { margin-bottom: 0; }

        .section-title {
            font-weight: 600;
            color: var(--color-primary);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 8px;
        }

        .result-item { margin-bottom: 12px; }
        .result-item:last-child { margin-bottom: 0; }

        .label {
            font-weight: 600;
            color: var(--color-text);
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            opacity: 0.7;
        }

        .value {
            font-size: 15px;
            margin-top: 4px;
            color: var(--color-text);
            word-break: break-word;
        }

        .error {
            background-color: rgba(192, 21, 31, 0.1);
            border: 1px solid var(--color-error);
            color: var(--color-error);
            padding: var(--space-16);
            border-radius: var(--radius-md);
            margin-top: var(--space-20);
            font-size: 14px;
        }

        .success {
            background-color: rgba(32, 128, 132, 0.1);
            border: 1px solid var(--color-success);
            color: var(--color-success);
            padding: var(--space-16);
            border-radius: var(--radius-md);
            margin-top: var(--space-20);
            font-size: 14px;
        }

        .warning {
            background-color: rgba(255, 152, 0, 0.1);
            border: 1px solid var(--color-warning);
            color: #e65100;
            padding: var(--space-16);
            border-radius: var(--radius-md);
            margin-top: var(--space-20);
            font-size: 13px;
        }

        .divider {
            height: 1px;
            background-color: var(--color-border);
            margin: var(--space-20) 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: var(--space-20);
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        th {
            background-color: rgba(32, 128, 132, 0.1);
            color: var(--color-primary);
            padding: 12px;
            text-align: left;
            font-weight: 600;
            font-size: 12px;
            border-bottom: 2px solid var(--color-border);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--color-border);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background-color: rgba(32, 128, 132, 0.05);
        }

        .year-cell {
            text-align: center;
            font-weight: 600;
            color: var(--color-primary);
        }

        .count-cell {
            text-align: center;
            background-color: rgba(32, 128, 132, 0.05);
        }

        .no-data {
            text-align: center;
            padding: var(--space-20);
            color: #999;
            font-style: italic;
        }

        .status-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-active {
            background-color: #c8e6c9;
            color: #2e7d32;
        }

        .status-liquidated {
            background-color: #ffccbc;
            color: #d84315;
        }

        .debug-panel {
            background-color: #f5f5f5;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: var(--space-16);
            margin-top: var(--space-20);
            font-size: 12px;
            font-family: 'Courier New', monospace;
            max-height: 400px;
            overflow-y: auto;
        }

        .debug-log {
            margin-bottom: 4px;
            color: #666;
        }

        .debug-log.info { color: #2196F3; }
        .debug-log.success { color: #4CAF50; }
        .debug-log.error { color: #f44336; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè¢ –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–ø–∞–Ω–∏–∏ / –ò–ü</h1>
        
        <div class="form-group">
            <label for="inn">–ò–ù–ù –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –ò–ü</label>
            <div class="input-wrapper">
                <input 
                    type="text" 
                    id="inn" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –ò–ù–ù (10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä)"
                    maxlength="12"
                >
                <button onclick="searchCompany()">–ü–æ–∏—Å–∫</button>
            </div>
        </div>

        <div class="tabs" id="tabs" style="display: none;">
            <button class="tab-button active" onclick="switchTab('info')">üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
            <button class="tab-button" onclick="switchTab('cases')">‚öñÔ∏è –°—É–¥–µ–±–Ω—ã–µ –¥–µ–ª–∞</button>
            <button class="tab-button" onclick="switchTab('debug')">üîç –û—Ç–ª–∞–¥–∫–∞</button>
        </div>

        <div id="info-tab" class="tab-content active"></div>
        <div id="cases-tab" class="tab-content"></div>
        <div id="debug-tab" class="tab-content"></div>
        <div id="content"></div>
    </div>

    <script>
        const API_KEY = 'QQuLenE1LVuotYiF';
        const API_URL = 'https://api.checko.ru/v2/company';
        const LEGAL_CASES_URL = 'https://api.checko.ru/v2/legal-cases';
        let debugLogs = [];
        let currentINN = '';
        let currentOGRN = '';

        function addDebugLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString('ru-RU');
            debugLogs.push({ timestamp, message, type });
            console.log(`[${timestamp}] ${message}`);
            updateDebugPanel();
        }

        function updateDebugPanel() {
            const debugTab = document.getElementById('debug-tab');
            let debugHtml = '<div class="result-card"><strong>üîç –õ–æ–≥ –∑–∞–ø—Ä–æ—Å–æ–≤:</strong><br>';
            debugLogs.forEach(log => {
                const className = log.type === 'success' ? 'success' : log.type === 'error' ? 'error' : 'info';
                debugHtml += `<div class="debug-log ${className}">[${log.timestamp}] ${escapeHtml(log.message)}</div>`;
            });
            debugHtml += '</div>';
            debugTab.innerHTML = debugHtml;
        }

        function validateINN(inn) {
            const cleaned = inn.replace(/\D/g, '');
            if (cleaned.length !== 10 && cleaned.length !== 12) return false;
            return /^\d{10}$|^\d{12}$/.test(cleaned);
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'cases' && !document.getElementById('cases-tab').innerHTML) {
                loadLegalCases(currentINN, currentOGRN);
            }
        }

        async function searchCompany() {
            const innInput = document.getElementById('inn');
            const inn = innInput.value.trim();
            debugLogs = [];

            if (!inn) {
                document.getElementById('content').innerHTML = '<div class="error">‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ò–ù–ù</div>';
                return;
            }

            if (!validateINN(inn)) {
                document.getElementById('content').innerHTML = '<div class="error">‚ö†Ô∏è –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ò–ù–ù. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä</div>';
                return;
            }

            currentINN = inn.replace(/\D/g, '');
            currentOGRN = '';
            document.getElementById('content').innerHTML = '<div class="loading"><div class="spinner"></div><p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p></div>';
            document.getElementById('info-tab').innerHTML = '';
            document.getElementById('cases-tab').innerHTML = '';
            document.getElementById('debug-tab').innerHTML = '';
            document.getElementById('tabs').style.display = 'flex';
            
            addDebugLog(`–ó–∞–ø—Ä–æ—Å –ø–æ –ò–ù–ù: "${currentINN}"`);

            try {
                const url = `${API_URL}?key=${API_KEY}&inn=${currentINN}`;
                addDebugLog(`URL –∫–æ–º–ø–∞–Ω–∏–∏: ${url}`);

                const response = await fetch(url);
                addDebugLog(`HTTP —Å—Ç–∞—Ç—É—Å: ${response.status}`, response.ok ? 'success' : 'error');

                const responseText = await response.text();
                let data = JSON.parse(responseText);
                addDebugLog('JSON —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω', 'success');

                if (!data.data) {
                    document.getElementById('content').innerHTML = '<div class="error">‚ùå –ö–æ–º–ø–∞–Ω–∏—è –∏–ª–∏ –ò–ü –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –ø–æ –¥–∞–Ω–Ω–æ–º—É –ò–ù–ù</div>';
                    return;
                }

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –û–ì–†–ù –¥–ª—è –ø–æ–∏—Å–∫–∞ –¥–µ–ª
                currentOGRN = data.data.–û–ì–†–ù || data.data.–û–ì–†–ù–ò–ü || '';
                addDebugLog(`–û–ì–†–ù —Å–æ—Ö—Ä–∞–Ω—ë–Ω: ${currentOGRN}`);

                addDebugLog('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ', 'success');
                displayCompanyInfo(data.data);
                document.getElementById('content').innerHTML = '';
                document.getElementById('tabs').style.display = 'flex';

            } catch (error) {
                addDebugLog(`–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: ${error.message}`, 'error');
                document.getElementById('content').innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö: ${error.message}</div>`;
            }
        }

        async function loadLegalCases(inn, ogrn = '') {
            const casesTab = document.getElementById('cases-tab');
            casesTab.innerHTML = '<div class="loading"><div class="spinner"></div><p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª...</p></div>';

            try {
                let allRecords = [];
                const pageSize = 100;
                let totalPages = 1;

                addDebugLog(`–ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥–µ–ª –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ –ø–æ –ò–ù–ù: ${inn}`);

                // –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
                try {
                    const firstUrl = `${LEGAL_CASES_URL}?key=${API_KEY}&inn=${inn}&date_from=2023-01-01&date_to=2025-12-31&page=1&limit=${pageSize}`;
                    addDebugLog(`–ó–∞–ø—Ä–æ—Å —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª - page: 1, limit: ${pageSize}`);
                    addDebugLog(`${firstUrl}`);

                    const firstResponse = await fetch(firstUrl);
                    const firstResponseText = await firstResponse.text();
                    const firstData = JSON.parse(firstResponseText);
                    
                    addDebugLog(`HTTP —Å—Ç–∞—Ç—É—Å: ${firstResponse.status}`, 'info');

                    if (firstData.data && firstData.data.–°—Ç—Ä–í—Å–µ–≥–æ) {
                        totalPages = firstData.data.–°—Ç—Ä–í—Å–µ–≥–æ;
                        addDebugLog(`–û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ ${totalPages} —Å—Ç—Ä–∞–Ω–∏—Ü(—ã), –≤—Å–µ–≥–æ ${firstData.data.–ó–∞–ø–í—Å–µ–≥–æ} –∑–∞–ø–∏—Å–µ–π`, 'success');
                    }

                    if (firstData.data && firstData.data.–ó–∞–ø–∏—Å–∏ && Array.isArray(firstData.data.–ó–∞–ø–∏—Å–∏)) {
                        allRecords = allRecords.concat(firstData.data.–ó–∞–ø–∏—Å–∏);
                        addDebugLog(`‚úì –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${firstData.data.–ó–∞–ø–∏—Å–∏.length} –¥–µ–ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 1. –í—Å–µ–≥–æ: ${allRecords.length}`, 'success');
                    }

                } catch (e) {
                    addDebugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ (page 1): ${e.message}`, 'error');
                }

                // –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
                for (let page = 2; page <= totalPages; page++) {
                    try {
                        const url = `${LEGAL_CASES_URL}?key=${API_KEY}&inn=${inn}&date_from=2023-01-01&date_to=2025-12-31&page=${page}&limit=${pageSize}`;
                        addDebugLog(`–ó–∞–ø—Ä–æ—Å —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª - page: ${page}, limit: ${pageSize}`);
                        addDebugLog(`${url}`);

                        const response = await fetch(url);
                        const responseText = await response.text();
                        const data = JSON.parse(responseText);
                        
                        addDebugLog(`HTTP —Å—Ç–∞—Ç—É—Å: ${response.status}`, 'info');

                        if (data.data && data.data.–ó–∞–ø–∏—Å–∏ && Array.isArray(data.data.–ó–∞–ø–∏—Å–∏)) {
                            allRecords = allRecords.concat(data.data.–ó–∞–ø–∏—Å–∏);
                            addDebugLog(`‚úì –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${data.data.–ó–∞–ø–∏—Å–∏.length} –¥–µ–ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ${page}. –í—Å–µ–≥–æ: ${allRecords.length}`, 'success');
                        }

                    } catch (e) {
                        addDebugLog(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ (page ${page}): ${e.message}`, 'error');
                    }
                }

                if (allRecords.length === 0) {
                    addDebugLog('–°—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª –Ω–µ –Ω–∞–π–¥–µ–Ω–æ', 'warning');
                    casesTab.innerHTML = '<div class="no-data">üìã –°—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                    return;
                }

                addDebugLog(`–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –í—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ ${allRecords.length} –¥–µ–ª`, 'success');
                displayLegalCases(allRecords, casesTab);

            } catch (error) {
                addDebugLog(`–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª: ${error.message}`, 'error');
                casesTab.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª: ${error.message}</div>`;
            }
        }

        function displayLegalCases(records, container) {
            addDebugLog(`–û–±—Ä–∞–±–æ—Ç–∫–∞ ${records.length} –∑–∞–ø–∏—Å–µ–π —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª`, 'info');

            const statistics = {
                '–ò—Å—Ç–µ—Ü': { '2023': 0, '2024': 0, '2025': 0 },
                '–û—Ç–≤–µ—Ç—á–∏–∫': { '2023': 0, '2024': 0, '2025': 0 }
            };

            let processedCount = 0;

            records.forEach((record, index) => {
                if (!record.–î–∞—Ç–∞) return;
                
                const year = record.–î–∞—Ç–∞.substring(0, 4);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –Ω–∞—à–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤ –∏—Å—Ç—Ü–∞—Ö
                if (record.–ò—Å—Ç && Array.isArray(record.–ò—Å—Ç)) {
                    const isIstec = record.–ò—Å—Ç.some(ist => ist.–ò–ù–ù === currentINN);
                    if (isIstec && statistics['–ò—Å—Ç–µ—Ü'][year] !== undefined) {
                        statistics['–ò—Å—Ç–µ—Ü'][year]++;
                        processedCount++;
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –Ω–∞—à–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤ –æ—Ç–≤–µ—Ç—á–∏–∫–∞—Ö
                if (record.–û—Ç–≤–µ—Ç && Array.isArray(record.–û—Ç–≤–µ—Ç)) {
                    const isOtvetc = record.–û—Ç–≤–µ—Ç.some(ot => ot.–ò–ù–ù === currentINN);
                    if (isOtvetc && statistics['–û—Ç–≤–µ—Ç—á–∏–∫'][year] !== undefined) {
                        statistics['–û—Ç–≤–µ—Ç—á–∏–∫'][year]++;
                        processedCount++;
                    }
                }
            });

            addDebugLog(`–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–µ–ª: ${processedCount}`, 'success');

            let html = '<div class="result-card">';
            html += '<div class="success">‚úì –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ</div>';
            html += '<div class="divider"></div>';
            
            html += '<table>';
            html += '<thead><tr>';
            html += '<th>–†–æ–ª—å</th>';
            html += '<th class="year-cell">2023</th>';
            html += '<th class="year-cell">2024</th>';
            html += '<th class="year-cell">2025</th>';
            html += '</tr></thead>';
            html += '<tbody>';

            Object.keys(statistics).forEach(role => {
                html += '<tr>';
                html += `<td><strong>${role}</strong></td>`;
                html += `<td class="count-cell">${statistics[role]['2023']}</td>`;
                html += `<td class="count-cell">${statistics[role]['2024']}</td>`;
                html += `<td class="count-cell">${statistics[role]['2025']}</td>`;
                html += '</tr>';
            });

            html += '</tbody></table>';
            html += '</div>';

            const totalCases = Object.values(statistics).flat().reduce((a, b) => a + b, 0);

            html += '<div class="result-card">';
            html += '<div class="section-title">üìë –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–µ–ª–∞—Ö</div>';
            html += `<div class="result-item">
                <div class="label">–í—Å–µ–≥–æ –¥–µ–ª –Ω–∞–π–¥–µ–Ω–æ</div>
                <div class="value">${totalCases}</div>
            </div>`;
            html += `<div class="result-item">
                <div class="label">–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π –≤ –≤—ã–±–æ—Ä–∫–µ</div>
                <div class="value">${records.length}</div>
            </div>`;
            html += '</div>';

            container.innerHTML = html;
        }

        function displayCompanyInfo(company) {
            const isIP = !!company.–û–ì–†–ù–ò–ü || (!company.–ö–ü–ü && !company.–ù–∞–∏–º–ü–æ–ª–Ω);
            let title;
            if (isIP) {
                const fio = company.–§–ò–û || company.–ù–∞–∏–º–ü–æ–ª–Ω || company.–ù–∞–∏–º–°–æ–∫—Ä || '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å';
                title = `–ò–ü ${fio}`;
                addDebugLog('–û–ø—Ä–µ–¥–µ–ª—ë–Ω —Ç–∏–ø: –ò–ü', 'info');
            } else {
                title = company.–ù–∞–∏–º–ü–æ–ª–Ω || company.–ù–∞–∏–º–°–æ–∫—Ä || '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è';
                addDebugLog('–û–ø—Ä–µ–¥–µ–ª—ë–Ω —Ç–∏–ø: —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ', 'info');
            }

            let html = '<div class="result-card">';
            html += '<div class="success">‚úì –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ</div>';
            html += '<div class="divider"></div>';

            html += '<div class="result-section">';
            html += '<div class="section-title">üìã –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>';
            
            html += `<div class="result-item">
                <div class="label">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</div>
                <div class="value">${escapeHtml(title)}</div>
            </div>`;

            if (company.–ò–ù–ù) {
                html += `<div class="result-item">
                    <div class="label">–ò–ù–ù</div>
                    <div class="value">${escapeHtml(company.–ò–ù–ù)}</div>
                </div>`;
            }

            if (company.–ö–ü–ü && !isIP) {
                html += `<div class="result-item">
                    <div class="label">–ö–ü–ü</div>
                    <div class="value">${escapeHtml(company.–ö–ü–ü)}</div>
                </div>`;
            }

            if (company.–û–ì–†–ù && !isIP) {
                html += `<div class="result-item">
                    <div class="label">–û–ì–†–ù</div>
                    <div class="value">${escapeHtml(company.–û–ì–†–ù)}</div>
                </div>`;
            }

            if (company.–û–ì–†–ù–ò–ü && isIP) {
                html += `<div class="result-item">
                    <div class="label">–û–ì–†–ù–ò–ü</div>
                    <div class="value">${escapeHtml(company.–û–ì–†–ù–ò–ü)}</div>
                </div>`;
            }

            html += '</div>';

            html += '<div class="result-section">';
            html += '<div class="section-title">üìÖ –°—Ç–∞—Ç—É—Å –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>';

            if (company.–°—Ç–∞—Ç—É—Å && company.–°—Ç–∞—Ç—É—Å.–ù–∞–∏–º) {
                const statusClass = company.–°—Ç–∞—Ç—É—Å.–ù–∞–∏–º === '–î–µ–π—Å—Ç–≤—É–µ—Ç' ? 'status-active' : 'status-liquidated';
                html += `<div class="result-item">
                    <div class="label">–°—Ç–∞—Ç—É—Å</div>
                    <div class="value"><span class="status-badge ${statusClass}">${escapeHtml(company.–°—Ç–∞—Ç—É—Å.–ù–∞–∏–º)}</span></div>
                </div>`;
            }

            if (company.–î–∞—Ç–∞–†–µ–≥) {
                html += `<div class="result-item">
                    <div class="label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</div>
                    <div class="value">${escapeHtml(company.–î–∞—Ç–∞–†–µ–≥)}</div>
                </div>`;
            }

            html += '</div>';

            if (company.–Æ—Ä–ê–¥—Ä–µ—Å && company.–Æ—Ä–ê–¥—Ä–µ—Å.–ê–¥—Ä–µ—Å–†–§) {
                html += '<div class="result-section">';
                html += '<div class="section-title">üìç –ê–¥—Ä–µ—Å</div>';
                html += `<div class="result-item">
                    <div class="value">${escapeHtml(company.–Æ—Ä–ê–¥—Ä–µ—Å.–ê–¥—Ä–µ—Å–†–§)}</div>
                </div>`;
                html += '</div>';
            }

            if (company.–ö–æ–Ω—Ç–∞–∫—Ç—ã && (company.–ö–æ–Ω—Ç–∞–∫—Ç—ã.–¢–µ–ª || company.–ö–æ–Ω—Ç–∞–∫—Ç—ã.–ï–º—ç–π–ª)) {
                html += '<div class="result-section">';
                html += '<div class="section-title">üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</div>';
                
                if (company.–ö–æ–Ω—Ç–∞–∫—Ç—ã.–¢–µ–ª && company.–ö–æ–Ω—Ç–∞–∫—Ç—ã.–¢–µ–ª.length > 0) {
                    html += '<div class="result-item"><div class="label">–¢–µ–ª–µ—Ñ–æ–Ω—ã</div>';
                    company.–ö–æ–Ω—Ç–∞–∫—Ç—ã.–¢–µ–ª.slice(0, 3).forEach(tel => {
                        html += `<div style="font-size: 14px; margin-top: 4px;">‚òéÔ∏è ${escapeHtml(tel)}</div>`;
                    });
                    html += '</div>';
                }
                
                if (company.–ö–æ–Ω—Ç–∞–∫—Ç—ã.–ï–º—ç–π–ª && company.–ö–æ–Ω—Ç–∞–∫—Ç—ã.–ï–º—ç–π–ª.length > 0) {
                    html += '<div class="result-item"><div class="label">Email</div>';
                    company.–ö–æ–Ω—Ç–∞–∫—Ç—ã.–ï–º—ç–π–ª.slice(0, 3).forEach(email => {
                        html += `<div style="font-size: 14px; margin-top: 4px;">‚úâÔ∏è ${escapeHtml(email)}</div>`;
                    });
                    html += '</div>';
                }
                
                html += '</div>';
            }

            html += '</div>';
            document.getElementById('info-tab').innerHTML = html;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        document.getElementById('inn').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchCompany();
            }
        });
    </script>
</body>
</html>
